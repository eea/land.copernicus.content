<div tal:content="structure view/val" />
<label>I accept the <a id="terms-of-use-link" href="">Terms of Use</a></label>

<div style="display: none;" id="terms-of-use-modal" title="Terms of Use"
     tal:define="terms_of_use_doc python:view.context.context.portal_catalog.searchResults(Title='Terms of Use')">
  <p>
    <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 50px 0;"></span>
    <b tal:condition="python:terms_of_use_doc"
       tal:content="python:terms_of_use_doc[0].getObject().Description()">Summary of "Terms of Use" document
    </b>
  </p>
  <p>
    <span tal:condition="python:terms_of_use_doc"
          tal:content="structure python:terms_of_use_doc[0].getObject().getText()">
          Text terms of use form document with title "Terms of Use"
    </span>
    <span tal:condition="python:not terms_of_use_doc">
      Missing document with title "Terms of Use".
    </span>
  </p>
</div>

<script>
  $(function() {
  	$( "#terms-of-use-link" ).on("click", function(evt){
  	  evt.preventDefault();
	  var modal_width = $( window ).width() - ($( window ).width() / 3);
	  var modal_height = $( window ).height() - 50;
	  $( "#terms-of-use-modal" ).dialog({
	    modal: true,
	    width: modal_width,
	    maxHeight: modal_height,
	    buttons: {
	      Ok: function() {
	        $( this ).dialog( "close" );
	      }
	    }
	  });
  	});
  });
</script>
<span tal:define="
  lastUpload_value python:context.getField('lastUpload').getAccessor(context)();
  geographicCoverage_value python:context.getField('geographicCoverage').getAccessor(context)();
  geographicAccuracy_value python:context.getField('geographicAccuracy').getAccessor(context)();
  tags_value python:context.getField('subject').getAccessor(context)();
  rights_value python:context.getField('rights').getAccessor(context)();
  coordinateRS_value python:context.getField('coordinateReferenceSystem').getAccessor(context)();
  dataSources_value python:context.getField('dataSources').getAccessor(context)();
  owners_value python:context.getField('owners').getAccessor(context)();
  dataCustodians_value python:context.getField('dataCustodians').getAccessor(context)();
  descriptionDM_value python:context.getField('descriptionDetailedMetadata').getAccessor(context)();
  accessAUC_value python:context.getField('accessAndUseConstraints').getAccessor(context)();

  has_metadata_details python:geographicAccuracy_value or tags_value or rights_value or coordinateRS_value or dataSources_value or owners_value or dataCustodians_value or descriptionDM_value or accessAUC_value;
  "

  tal:condition="python:has_metadata_details"
><!-- Some repetition, but tooltips are working too. -->

<style>
.detailed-metadata-container .section-title {
  border-bottom: solid 1px #EEEEEE;
  color: #BBBBBB;
  font-size: 14px;
  margin-bottom: 5px;
  text-align: left;
  padding-left: 26%;
  margin-left: -2px;
  text-transform: uppercase;
}

</style>
  <!-- New metadata -->
  <div class="detailed-metadata-container">
    <dl>


      <h4 class="section-title">Data identification</h4>
        <!-- Resource title -->
        <tal:block
          define="field python:context.getField('dataResourceTitle');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Resource title:</span>
          </dt>
          <dd tal:content="structure value">Resource title</dd>
        </tal:block>

        <!-- Resource abstract -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Resource abstract:</span>
          </dt>
          <dd tal:content="structure value">Resource abstract</dd>
        </tal:block>

        <!-- Resource type -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Resource type:</span>
          </dt>
          <dd tal:content="structure value">Resource type</dd>
        </tal:block>

        <!-- Resource Locator -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Resource Locator:</span>
          </dt>
          <dd tal:content="structure value">Resource Locator</dd>
        </tal:block>


      <h4 class="section-title">Classification of spatial data</h4>
        <!-- Topic Category -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Topic Category:</span>
          </dt>
          <dd tal:content="structure value">Topic Category</dd>
        </tal:block>

        <!-- Keyword -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Keyword:</span>
          </dt>
          <dd tal:content="structure value">Keyword</dd>
        </tal:block>


      <h4 class="section-title">Geographic reference</h4>
        <!-- Geographic Bounding Box -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Geographic Bounding Box:</span>
          </dt>
          <dd tal:content="structure value">Geographic Bounding Box</dd>
        </tal:block>

        <!-- Coordinate Reference System -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Coordinate Reference System:</span>
          </dt>
          <dd tal:content="structure value">Coordinate Reference System</dd>
        </tal:block>

        <!-- Coverage -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Coverage:</span>
          </dt>
          <dd tal:content="structure value">Coverage</dd>
        </tal:block>


      <h4 class="section-title">Temporal reference</h4>
        <!-- Temporal Extent -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Temporal Extent:</span>
          </dt>
          <dd tal:content="structure value">Temporal Extent</dd>
        </tal:block>

        <!-- Date of publication -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Date of publication:</span>
          </dt>
          <dd tal:content="structure value">Date of publication</dd>
        </tal:block>

      <h4 class="section-title">Quality and validity</h4>
        <!-- Lineage -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Lineage:</span>
          </dt>
          <dd tal:content="structure value">Lineage</dd>
        </tal:block>

        <!-- Spatial resolution -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Spatial resolution:</span>
          </dt>
          <dd tal:content="structure value">Spatial resolution</dd>
        </tal:block>

      <h4 class="section-title">Conformity</h4>
        <!-- Specification -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Specification:</span>
          </dt>
          <dd tal:content="structure value">Specification</dd>
        </tal:block>

        <!-- Degree -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Degree:</span>
          </dt>
          <dd tal:content="structure value">Degree</dd>
        </tal:block>


      <h4 class="section-title">Constraints related to access and use</h4>
        <!-- Conditions applying to access and use -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Resource Locator:</span>
          </dt>
          <dd tal:content="structure value">Resource Locator</dd>
        </tal:block>

        <!-- Limitation of public access -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Limitation of public access:</span>
          </dt>
          <dd tal:content="structure value">Limitation of public access</dd>
        </tal:block>


      <h4 class="section-title">Responsible organisation</h4>
        <!-- Responsible party -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Responsible party:</span>
          </dt>
          <dd tal:content="structure value">Responsible party</dd>
        </tal:block>

        <!-- Responsible party role -->
        <tal:block
          define="field python:context.getField('dataCustodians');
          value python:field.getAccessor(context)()"
          condition="value">
          <dt style="clear: left">
            <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
            <span i18n:translate="">Responsible party role:</span>
          </dt>
          <dd tal:content="structure value">Responsible party role</dd>
        </tal:block>
    </dl>
  </div><!-- New metadata -->

  <!-- Old metadata -->
  <br />
  <h3>Old metadata (will be removed):</h3>
  <div class="detailed-metadata-container">
    <dl>
      <!-- Temporal coverage: -->
      <tal:temporalCoverage metal:use-macro="context/temporal_macros/macros/temporal-coverage-data" ></tal:temporalCoverage>

      <!-- Latest upload -->
      <tal:block
        define="field python:context.getField('lastUpload');
        value python:field.getAccessor(context)()"
        condition="value">
        <dt style="clear: left">
          <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
          <span i18n:translate="">Latest upload:</span>
        </dt>
        <dd tal:content="python: context.toLocalizedTime(value, long_format=0)">Last upload</dd>
      </tal:block>

      <!-- Geographic coverage -->
      <tal:block
        define="field python:context.getField('geographicCoverage');
        value python:field.getAccessor(context)()"
        condition="value">
        <dt style="clear: left">
          <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
          <span i18n:translate="">Geographic coverage:</span>
        </dt>
        <dd >
            <span tal:content="python: u', '.join(context.get_countries_coverage())" />
        </dd>
      </tal:block>

      <!-- Geographic accuracy -->
      <tal:block
        define="field python:context.getField('geographicAccuracy');
        value python:field.getAccessor(context)()"
        condition="value">
        <dt style="clear: left">
          <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
          <span i18n:translate="">Geographic accuracy:</span>
        </dt>
        <dd tal:content="structure value">Geographic accuracy</dd>
      </tal:block>

      <!-- Tags -->
      <tal:block
        define="field python:context.getField('subject');
        value python:field.getAccessor(context)()"
        condition="value">
        <dt style="clear: left">
          <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
          <span i18n:translate="">Tags:</span>
        </dt>
        <dd>
          <a tal:repeat="tag value" href="" class="label-tag"
             tal:attributes="href string: ${context/@@plone_context_state/object_url}/dataset_tag_search?tag=${tag}">
             <span class="label-white-color" tal:content="tag"></span>
          </a>
        </dd>
      </tal:block>

      <!-- Rights -->
      <tal:block
        define="field python:context.getField('rights');
        value python:field.getAccessor(context)()"
        condition="value">
        <dt style="clear: left">
          <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
          <span i18n:translate="">Rights:</span>
        </dt>
        <dd tal:content="structure value">Rights</dd>
      </tal:block>

      <!-- Coordinate Reference System -->
      <tal:block
        define="field python:context.getField('coordinateReferenceSystem');
        value python:field.getAccessor(context)()"
        condition="value">
        <dt style="clear: left">
          <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
          <span i18n:translate="">Coordinate Reference System:</span>
        </dt>
        <dd tal:content="structure value">Coordinate Reference System</dd>
      </tal:block>

      <!-- Data sources -->
      <tal:block
        define="field python:context.getField('dataSources');
        value python:field.getAccessor(context)()"
        condition="value">
        <dt style="clear: left">
          <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
          <span i18n:translate="">Data Sources:</span>
        </dt>
        <dd tal:content="structure value">Data sources</dd>
      </tal:block>

      <!-- owners -->
      <tal:block
        define="field python:context.getField('owners');
        value python:field.getAccessor(context)()"
        condition="value">
        <dt style="clear: left">
          <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
          <span i18n:translate="">Owners:</span>
        </dt>
        <dd tal:content="structure value">Owners</dd>
      </tal:block>

      <!-- Data custodians -->
      <tal:block
        define="field python:context.getField('dataCustodians');
        value python:field.getAccessor(context)()"
        condition="value">
        <dt style="clear: left">
          <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
          <span i18n:translate="">Data custodians:</span>
        </dt>
        <dd tal:content="structure value">Data custodians</dd>
      </tal:block>

      <!-- Description for detailed metadata -->
      <tal:block
        define="field python:context.getField('descriptionDetailedMetadata');
        value python:field.getAccessor(context)()"
        condition="value">
        <dt style="clear: left">
          <metal:basic use-macro="here/interface_elements_macros/macros/tooltip" />
          <span i18n:translate="">Description:</span>
        </dt>
        <dd tal:content="structure value">Description</dd>
      </tal:block>
    </dl>
  </div><!-- Old metadata -->
</span>

<!-- Access and Use Constraints -->
<tal:block
  define="field python:context.getField('accessAndUseConstraints');
  value python:field.getAccessor(context)()"
  condition="value">
  <h3 id="access-and-use-title" i18n:translate="">Access and Use Constraints</h3>
  <div tal:content="structure value">Access and Use Constraints</div>
</tal:block>

webpackJsonp([1],{NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("mvHQ"),i=o.n(s),r=o("7+uW"),n={name:"app",data:function(){return{LOREM:"Click me to edit",NONE:"",IS_DEBUG_MODE:!0,filters:this.get_filters(),columns:this.get_columns(),rows:this.get_rows()}},methods:{generate_random:function(t,e){return Math.random()*(e-t)+t},get_initial_json_data:function(){var t=$("#initial-json-data").text();try{return JSON.parse(t)}catch(t){return{}}},get_filters:function(){var t=this.get_initial_json_data();return t.filters?t.filters:[{id:"filter01",text:"Demo category"},{id:"filter02",text:"Demo category 2"},{id:"filter02",text:"Sub-category 3"}]},get_columns:function(){var t=this.get_initial_json_data();return t.columns?t.columns:[{id:"001",text:"Click me to edit"},{id:"002",text:"Demo column 2"},{id:"003",text:"Demo column 3"},{id:"004",text:"URL"}]},get_rows:function(){var t=this.get_initial_json_data();return t.rows?t.rows:[[{id:"005",text:"Demo category"},{id:"006",text:"Sub-category 1"},{id:"007",text:"col3 data1"},{id:"008",text:"https://www.google.com"}],[{id:"009",text:"Demo category"},{id:"010",text:"Sub-category 2"},{id:"011",text:"col3 data2"},{id:"012",text:"https://www.yahoo.com"}],[{id:"013",text:"Demo category 2"},{id:"014",text:"Sub-category 3"},{id:"015",text:"col3 data3"},{id:"016",text:"https://www.yahoo.com"}]]},generate_id:function(){return"__key_prefix__"+Date.now()+"_"+this.generate_random(1e4,99999)},new_data:function(t){return{id:this.generate_id(),text:t}},refresh:function(){for(var t=0;t<this.columns.length;t++)this.columns[t].id=this.generate_id();for(t=0;t<this.rows.length;t++)for(var e=0;e<this.columns.length;e++)this.rows[t][e].id=this.generate_id();this.$forceUpdate()},update_col:function(t,e){this.columns[e].text=t.trim(),this.refresh()},update_row:function(t,e,o){this.rows[e][o].text=t.trim(),this.refresh()},add_col:function(t){this.columns.splice(t,0,this.new_data(this.LOREM));for(var e=0;e<this.rows.length;e++){this.rows[e].splice(t,0,this.new_data(this.NONE))}this.refresh()},delete_col:function(t){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&!confirm("Are you sure you want to delete this column?"))return;this.columns.splice(t,1);for(var e=0;e<this.rows.length;e++){this.rows[e].splice(t,1)}this.refresh()},add_row:function(t){this.rows.splice(t,0,new Array(this.columns.length));for(var e=0;e<this.columns.length;e++)this.rows[t][e]=this.new_data(this.NONE);this.refresh()},delete_row:function(t){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&!confirm("Are you sure you want to delete this row?"))return;this.rows.splice(t,1),this.refresh()},delete_all_rows:function(){if(confirm("Are you sure you want to delete all rows?")){for(var t=this.rows.length,e=0;e<t;e++)this.delete_row(0,!0);this.refresh()}},delete_all_cols:function(){if(confirm("Are you sure you want to delete all columns?")){for(var t=this.columns.length,e=0;e<t;e++)this.delete_col(0,!0);this.refresh()}},move_col_to_left:function(t){if(0!=t){var e=this.columns[t-1].text;this.columns[t-1].text=this.columns[t].text,this.columns[t].text=e;for(var o=0;o<this.rows.length;o++)e=this.rows[o][t-1].text,this.rows[o][t-1].text=this.rows[o][t].text,this.rows[o][t].text=e;this.columns=this.columns.slice(),this.rows=this.rows.slice(),this.refresh()}},move_col_to_right:function(t){if(t!=this.columns.length-1){var e=this.columns[t+1].text;this.columns[t+1].text=this.columns[t].text,this.columns[t].text=e;for(var o=0;o<this.rows.length;o++)e=this.rows[o][t+1].text,this.rows[o][t+1].text=this.rows[o][t].text,this.rows[o][t].text=e;this.columns=this.columns.slice(),this.rows=this.rows.slice(),this.refresh()}},move_row_up:function(t){if(0!=t){var e=this.rows[t-1];this.rows[t-1]=this.rows[t],this.rows[t]=e,this.columns=this.columns.slice(),this.rows=this.rows.slice(),this.refresh()}},move_row_down:function(t){if(t!=this.rows.length-1){var e=this.rows[t+1];this.rows[t+1]=this.rows[t],this.rows[t]=e,this.columns=this.columns.slice(),this.rows=this.rows.slice(),this.refresh()}}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"datatables-admin"}},[o("div",{attrs:{id:"initial-json-data"}},[t._v('{"columns":[{"id":"001","text":"Click me to edit"},{"id":"002","text":"Demo column 2"},{"id":"003","text":"Demo column 3"},{"id":"004","text":"URL"}],"rows":[[{"id":"005","text":"Demo category"},{"id":"006","text":"Sub-category 1"},{"id":"007","text":"col3 data1"},{"id":"008","text":"https://www.google.com"}],[{"id":"009","text":"Demo category"},{"id":"010","text":"Sub-category 2"},{"id":"011","text":"col3 data2"},{"id":"012","text":"https://www.yahoo.com"}],[{"id":"013","text":"Demo category 2"},{"id":"014","text":"Sub-category 3"},{"id":"015","text":"col3 data3"},{"id":"016","text":"https://www.yahoo.com"}]],"filters":[{"id":"filter01","text":"Demo category"},{"id":"filter02","text":"Demo category 2"},{"id":"filter02","text":"Sub-category 3"}]}')]),t._v(" "),o("table",{attrs:{id:"editor"}},[o("thead",[o("tr",[t._l(t.columns,function(e,s){return o("th",{key:e.id},[o("i",{staticClass:"fas fa-long-arrow-alt-left fa-2x dta-btn move-col-left",attrs:{title:"Move column to left"},on:{click:function(e){t.move_col_to_left(s)}}}),t._v(" "),o("i",{staticClass:"fas fa-long-arrow-alt-right fa-2x dta-btn move-col-right",attrs:{title:"Move column to right"},on:{click:function(e){t.move_col_to_right(s)}}}),t._v(" "),o("i",{staticClass:"fas fa-plus fa-2x dta-btn add-col",attrs:{title:"Add a column after this one"},on:{click:function(e){t.add_col(s+1)}}}),t._v(" "),o("i",{staticClass:"fas fa-times fa-2x dta-btn delete-col",attrs:{title:"Delete this column"},on:{click:function(e){t.delete_col(s)}}}),t._v(" "),o("br"),t._v(" "),o("editable",{attrs:{content:t.columns[s].text},on:{update:function(e){t.update_col(e,s)}}})],1)}),t._v(" "),o("th",[o("i",{staticClass:"fas fa-plus fa-2x dta-btn add-col",attrs:{title:"Add a column"},on:{click:function(e){t.add_col(0)}}}),t._v(" "),o("i",{staticClass:"fas fa-plus fa-2x dta-btn add-row",attrs:{title:"Add a row"},on:{click:function(e){t.add_row(0)}}}),t._v(" "),o("i",{staticClass:"fas fa-times fa-2x dta-btn delete-all-cols",attrs:{title:"Delete all columns"},on:{click:t.delete_all_cols}}),t._v(" "),o("i",{staticClass:"fas fa-times fa-2x dta-btn delete-all-rows",attrs:{title:"Delete all rows"},on:{click:t.delete_all_rows}})])],2)]),t._v(" "),o("tbody",t._l(t.rows,function(e,s){return o("tr",{key:s},[t._l(t.columns,function(e,i){return o("td",{key:e.id},[o("editable",{attrs:{content:t.rows[s][i].text},on:{update:function(e){t.update_row(e,s,i)}}})],1)}),o("td",[o("i",{staticClass:"fas fa-long-arrow-alt-up fa-2x dta-btn move-row-up",attrs:{title:"Move row up"},on:{click:function(e){t.move_row_up(s)}}}),t._v(" "),o("i",{staticClass:"fas fa-long-arrow-alt-down fa-2x dta-btn move-row-down",attrs:{title:"Move row down"},on:{click:function(e){t.move_row_down(s)}}}),t._v(" "),o("i",{staticClass:"fas fa-plus fa-2x dta-btn add-row",attrs:{title:"Add a row under this one"},on:{click:function(e){t.add_row(s+1)}}}),t._v(" "),o("i",{staticClass:"fas fa-times fa-2x dta-btn delete-row",attrs:{title:"Delete this row"},on:{click:function(e){t.delete_row(s)}}})])],2)}))]),t._v(" "),t.IS_DEBUG_MODE?o("div",[o("p",[o("b",[t._v("Columns:")]),t._v(" "),o("span",{domProps:{textContent:t._s(t.columns)}})]),t._v(" "),o("p",[o("b",[t._v("Rows:")]),t._v(" "),o("span",{domProps:{textContent:t._s(t.rows)}})])]):t._e(),t._v(" "),t._m(0),t._v(" "),o("table-preview")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("form",{attrs:{id:"save-work",action:"./admin_files_library",method:"post"}},[e("textarea",{attrs:{id:"exported-json",name:"exported-json"}},[this._v("JSON PLACEHOLDER")])])}]};var l=o("VU/8")(n,a,!1,function(t){o("oz5r")},null,null).exports;r.a.config.productionTip=!1,r.a.component("editable",{template:'\n    <div contenteditable="true" @blur="emitChange">\n      {{ content }}\n    </div>\n  ',props:["content"],methods:{emitChange:function(t){this.$emit("update",t.target.textContent)}}}),r.a.component("table-preview",{template:'\n    <div class="table-preview-container">\n      <button class=\'render-table\' v-on:click="save_work">Save</button>\n      <button class=\'render-table\' v-on:click="render_table">Preview table</button>\n      <table class="table-render-preview"></table>\n    </div>\n  ',props:["content"],methods:{export_json:function(){var t=this.$parent.columns,e=this.$parent.rows,o=this.$parent.filters,s=i()({columns:t,rows:e,filters:o});$("#exported-json").text(s)},save_work:function(){this.export_json(),$("form#save-work").submit()},render_table:function(){var t=this.$parent.columns,e=this.$parent.rows,o=this.$parent.filters,s=document.querySelector(".table-render-preview");$.fn.DataTable.isDataTable(".table-render-preview")&&$(".table-render-preview").DataTable().clear().destroy();var i=document.createElement("table");i.className="table-render-preview",i.innerHTML=function(t,e){for(var o,s="<table border=1><thead><tr>",i=0;i<t.length;i++)s+="<th>"+t[i].text+"</th>";for(s+="</thead><tbody>",i=0;i<e.length;i++){s+="<tr>";for(var r=0;r<e[i].length;r++)"URL"==t[r].text||"URL"==t[r].text.trim()?s+="<td>"+(void 0!==(o=e[i][r].text)?"<a href='"+o+"' target='_blank' title="+o+">Link<span style='display:none !important'>"+o+"</span></a>":"N/A")+"</td>":s+="<td>"+e[i][r].text+"</td>";s+="</tr>"}return s+="</tbody></table>"}(t,e),s.parentNode.replaceChild(i,s);var r=$(".table-render-preview").dataTable({destroy:!0,aaSorting:[]});$(".dataTables_wrapper").append(function(t){for(var e="<div class='filters-container'><p><b>Search filters:</b></p><ul class='filters-list'>",o=0;o<t.length;o++)e+="<li class='search-filter'>"+t[o].text+"</li>";return e+="</ul></div>"}(o)),$(".search-filter").on("click",function(){r.fnFilter('"'+$(this).text()+'"'),$(".search-filter").removeClass("is-selected"),$(this).addClass("is-selected")})}}}),new r.a({el:"#datatables-admin",template:"<App/>",components:{App:l}})},oz5r:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.js.map